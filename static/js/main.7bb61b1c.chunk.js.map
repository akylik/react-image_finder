{"version":3,"sources":["components/Searchbar.js","components/Modal/Modal.js","services/image-api.js","views/ArticlesView.js","App.js","index.js"],"names":["Searchbar","state","query","handleChange","e","setState","currentTarget","value","handleSubmit","preventDefault","props","onSubmit","console","log","className","this","type","onChange","autoComplete","autoFocus","placeholder","Component","modalRoot","document","querySelector","Modal","imgUrl","handleKeyDown","code","onClose","handleBackdropClick","event","target","window","addEventListener","removeEventListener","createPortal","onClick","src","alt","apiKey","searchQuery","currentPage","currentPagePrev","pageSize","axios","get","then","response","data","results","ArticlesView","error","propsPage","showModal","imageUrl","onChangeQuery","fetchImages","imageApi","prevState","fetchImagesPrev","toggleModal","clickImg","dataset","url","prevProps","map","id","urls","key","small","data-url","regular","length","disabled","App","to","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7bb61b1c.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport '../../src/styles/base.scss';\r\n\r\nclass Searchbar extends Component {\r\n  state = { query: '' };\r\n\r\n  handleChange = e => {\r\n    this.setState({ query: e.currentTarget.value });\r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    this.props.onSubmit(this.state.query);\r\n    console.log(this.state.query);\r\n    this.setState({ query: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Searchbar\">\r\n        <form onSubmit={this.handleSubmit} className=\"SearchForm\">\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\"></span>\r\n          </button>\r\n          <input\r\n            type=\"text\"\r\n            value={this.state.query}\r\n            onChange={this.handleChange}\r\n            className=\"SearchForm-input\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n          />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport '../../styles/base.scss';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  state = {\n    imgUrl: this.props.imgUrl,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = event => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\n        <div className=\"Modal\">\n          <img src={this.state.imgUrl} alt=\"\" />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import axios from 'axios';\r\n\r\nconst apiKey = 'Fvhh4z9NX-FC1xEeSCXHy1edJx-23UstYx-0vS7_9oA';\r\n\r\nconst fetchImages = ({ searchQuery = '', currentPage = 1, currentPagePrev = 0, pageSize = 15 }) => {\r\n  return axios\r\n    .get(\r\n      `https://api.unsplash.com/search/photos/?query=${searchQuery}&client_id=${apiKey}&page=${currentPage}&per_page=15`,\r\n    )\r\n    .then(response => response.data.results);\r\n};\r\n\r\nconst fetchImagesPrev = ({\r\n  searchQuery = '',\r\n  currentPage = 1,\r\n  currentPagePrev = 0,\r\n  pageSize = 15,\r\n}) => {\r\n  return axios\r\n    .get(\r\n      `https://api.unsplash.com/search/photos/?query=${searchQuery}&client_id=${apiKey}&page=${\r\n        currentPagePrev - 1\r\n      }&per_page=15`,\r\n    )\r\n    .then(response => response.data.results);\r\n};\r\n\r\nexport default { fetchImages, fetchImagesPrev };\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\nimport Searchbar from '../components/Searchbar';\nimport Modal from '../components/Modal';\nimport imageApi from '../services/image-api';\nimport '../styles/base.scss';\n\nclass ArticlesView extends Component {\n  state = {\n    currentPage: 1,\n    currentPagePrev: 0,\n    searchQuery: '',\n    error: null,\n    results: [],\n    propsPage: 0,\n    showModal: false,\n    imageUrl: '',\n  };\n\n  componentDidMount() {\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      if (this.state.currentPage > this.state.currentPagePrev) {\n        this.fetchImages();\n      } else {\n        this.fetchImagesPrev();\n      }\n    }\n  }\n\n  onChangeQuery = query => {\n    this.setState({\n      searchQuery: query,\n      currentPage: 1,\n      currentPagePrev: 0,\n      results: [],\n    });\n  };\n\n  fetchImages = () => {\n    const { searchQuery, currentPage, currentPagePrev } = this.state;\n    const options = {\n      searchQuery,\n      currentPage,\n      currentPagePrev,\n    };\n\n    imageApi.fetchImages(options).then(results => {\n      this.setState(prevState => ({\n        results: results,\n        currentPage: prevState.currentPage + 1,\n        currentPagePrev: prevState.currentPagePrev + 1,\n      }));\n    });\n  };\n\n  fetchImagesPrev = () => {\n    const { searchQuery, currentPage, currentPagePrev } = this.state;\n    const options = {\n      searchQuery,\n      currentPage,\n      currentPagePrev,\n    };\n\n    imageApi.fetchImagesPrev(options).then(results => {\n      this.setState(prevState => ({\n        results: results,\n        currentPage:\n          prevState.currentPage > 1\n            ? prevState.currentPage - 1\n            : prevState.currentPage,\n        currentPagePrev:\n          prevState.currentPagePrev > 1\n            ? prevState.currentPagePrev - 1\n            : prevState.currentPagePrev,\n      }));\n    });\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  clickImg = e => {\n   //  console.log(e.currentTarget.dataset.url);\n    this.setState({\n      imageUrl: e.currentTarget.dataset.url,\n    });\n    this.toggleModal();\n  };\n\n  render() {\n    const { error, results } = this.state;\n\n    return (\n      <div>\n        <div>\n          {error && <h1>Ой ошибка, всё пропало!!!</h1>}\n\n          {this.state.showModal && (\n            <Modal\n              onClose={this.toggleModal}\n              imgUrl={this.state.imageUrl}\n            ></Modal>\n          )}\n          <Searchbar onSubmit={this.onChangeQuery} />\n\n          <div>\n            <ul className=\"ImageGallery\">\n              {results.map(({ id, urls }) => (\n                <li key={id} className=\"ImageGalleryItem\">\n                  <img\n                    src={urls.small}\n                    id={id}\n                    data-url={urls.regular}\n                    className=\"ImageGalleryItem-image\"\n                    onClick={this.clickImg}\n                  />\n                </li>\n              ))}\n            </ul>\n\n            {results.length > 0 && (\n              <div className=\"Button__container\">\n                <button\n                  type=\"button\"\n                  onClick={this.fetchImagesPrev}\n                  className=\"Button\"\n                  disabled={this.state.currentPagePrev === 1 && true}\n                >\n                  Назад\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={this.fetchImages}\n                  className=\"Button\"\n                >\n                  Далее\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ArticlesView;\n","import React from 'react';\nimport { Switch, Route, Link } from 'react-router-dom';\nimport ArticlesView from './views/ArticlesView';\n\nconst App = () => (\n  <>\n    <ul>\n      <li>\n        <Link to=\"/articles\">Поиск картинок</Link>\n      </li>\n    </ul>\n\n    <Switch>\n      <Route path=\"/articles\">\n        <ArticlesView />\n      </Route>\n    </Switch>\n  </>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './App';\nimport 'modern-normalize/modern-normalize.css';\nimport './styles/base.scss';\n\nReactDOM.render(\n  <BrowserRouter>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </BrowserRouter>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}